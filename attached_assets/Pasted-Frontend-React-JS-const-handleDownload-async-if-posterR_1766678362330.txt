Frontend â€“ Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ (React / JS)
const handleDownload = async () => {
  if (!posterRef.current) return;

  const posterHtml = posterRef.current.outerHTML;

  const styles = Array.from(document.styleSheets)
    .map(sheet => {
      try {
        return Array.from(sheet.cssRules).map(rule => rule.cssText).join('\n');
      } catch {
        return '';
      }
    })
    .join('\n');

  const fullHtml = `
<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<style>
${styles}
body { margin: 0; }
</style>
</head>
<body>
${posterHtml}
</body>
</html>
`;

  const response = await fetch('/api/export-poster', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      html: fullHtml,
      format: 'pdf',
      orientation
    })
  });

  const blob = await response.blob();
  const url = URL.createObjectURL(blob);

  const link = document.createElement('a');
  link.href = url;
  link.download = `poster-${Date.now()}.pdf`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  URL.revokeObjectURL(url);
};

ğŸ”¹ Backend â€“ API Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Puppeteer (Node.js)
app.post("/api/export-poster", async (req, res) => {
  const { html, orientation } = req.body;

  const browser = await puppeteer.launch({
    headless: true,
    args: ['--no-sandbox', '--disable-setuid-sandbox']
  });

  const page = await browser.newPage();

  await page.setViewport({
    width: orientation === 'landscape' ? 1122 : 794,
    height: orientation === 'landscape' ? 794 : 1122,
    deviceScaleFactor: 2
  });

  await page.setContent(html, { waitUntil: 'networkidle0' });
  await page.waitForFunction(() => document.fonts.status === 'loaded');

  const pdfBuffer = await page.pdf({
    format: 'A4',
    landscape: orientation === 'landscape',
    printBackground: true
  });

  await browser.close();

  res.setHeader('Content-Type', 'application/pdf');
  res.send(pdfBuffer);
});

ğŸŸ¢ Ù…Ø§Ø°Ø§ ÙŠÙØ¹Ù„ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ØŸ

âœ”ï¸ ÙŠÙ…Ù†Ø¹ ØªÙˆÙ„ÙŠØ¯ PDF ÙØ§Ø±Øº
âœ”ï¸ ÙŠÙ†Ù‚Ù„ HTML ÙƒØ§Ù…Ù„ Ù…Ø¹ CSS
âœ”ï¸ ÙŠÙ†ØªØ¸Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø®Ø·ÙˆØ·
âœ”ï¸ ÙŠØ¹Ù…Ù„ Ø¯Ø§Ø®Ù„ Replit Ø¨Ø¯ÙˆÙ† Ø£Ø®Ø·Ø§Ø¡
âœ”ï¸ Ø¬ÙˆØ¯Ø© Ø·Ø¨Ø§Ø¹Ø© Ø±Ø³Ù…ÙŠØ© A4

ğŸ“Œ Ù…Ù„Ø§Ø­Ø¸Ø© Ù„Ù„Ù€ Agent (Ø§Ø®ØªÙŠØ§Ø±ÙŠ ØªØ¶ÙŠÙÙ‡Ø§):

Fix blank PDF issue by passing full HTML correctly to Puppeteer and waiting for fonts before generating PDF.