import { db } from "./db";
import { approvedTopics, users } from "@shared/schema";
import bcrypt from "bcryptjs";

const ministryApprovedTopics = [
  // المواضيع الصحية الأساسية
  {
    slug: "hand-hygiene",
    title: "نظافة اليدين",
    points: [
      "اغسل يديك بالماء والصابون لمدة 20 ثانية على الأقل",
      "استخدم المعقم الكحولي عند عدم توفر الماء والصابون",
      "اغسل يديك قبل وبعد تناول الطعام",
      "اغسل يديك بعد استخدام دورة المياه",
      "تجنب لمس الوجه قبل غسل اليدين"
    ],
    isActive: true,
  },
  {
    slug: "diabetes-awareness",
    title: "التوعية بداء السكري",
    points: [
      "راقب مستوى السكر في الدم بانتظام",
      "اتبع نظاماً غذائياً صحياً ومتوازناً",
      "مارس الرياضة بانتظام لمدة 30 دقيقة يومياً",
      "تناول الأدوية في مواعيدها المحددة",
      "راجع الطبيب بشكل دوري للفحص"
    ],
    isActive: true,
  },
  {
    slug: "blood-pressure",
    title: "ارتفاع ضغط الدم",
    points: [
      "قلل من تناول الملح في طعامك",
      "حافظ على وزن صحي ومثالي",
      "تجنب التدخين والكحول",
      "مارس التمارين الرياضية بانتظام",
      "تناول أدويتك بانتظام حسب وصفة الطبيب"
    ],
    isActive: true,
  },
  {
    slug: "vaccination",
    title: "أهمية التطعيمات",
    points: [
      "التطعيمات تحمي من الأمراض الخطيرة",
      "التزم بجدول التطعيمات الوطني",
      "التطعيمات آمنة ومجربة علمياً",
      "تطعيم الأطفال يحميهم مدى الحياة",
      "استشر الطبيب حول التطعيمات اللازمة"
    ],
    isActive: true,
  },
  {
    slug: "mental-health",
    title: "الصحة النفسية",
    points: [
      "تحدث عن مشاعرك مع من تثق بهم",
      "مارس الرياضة لتحسين المزاج",
      "احصل على قسط كافٍ من النوم",
      "خصص وقتاً للاسترخاء والراحة",
      "لا تتردد في طلب المساعدة المتخصصة"
    ],
    isActive: true,
  },
  {
    slug: "healthy-nutrition",
    title: "التغذية الصحية",
    points: [
      "تناول الخضروات والفواكه يومياً",
      "اشرب 8 أكواب من الماء على الأقل",
      "قلل من السكريات والدهون المشبعة",
      "تناول وجبات منتظمة ومتوازنة",
      "اختر الحبوب الكاملة بدلاً من المكررة"
    ],
    isActive: true,
  },
  {
    slug: "smoking-cessation",
    title: "الإقلاع عن التدخين",
    points: [
      "التدخين يسبب السرطان وأمراض القلب",
      "الإقلاع يحسن صحتك فوراً",
      "استشر الطبيب للحصول على المساعدة",
      "تجنب الأماكن التي تشجع على التدخين",
      "استبدل التدخين بنشاطات صحية"
    ],
    isActive: true,
  },
  {
    slug: "respiratory-diseases",
    title: "الأمراض التنفسية",
    points: [
      "غطِّ فمك وأنفك عند السعال والعطس",
      "تجنب الأماكن المزدحمة والمغلقة",
      "حافظ على تهوية جيدة في المنزل",
      "ارتدِ الكمامة عند الضرورة",
      "راجع الطبيب عند ظهور أعراض تنفسية"
    ],
    isActive: true,
  },
  {
    slug: "child-health",
    title: "صحة الطفل",
    points: [
      "الرضاعة الطبيعية أفضل غذاء للطفل",
      "التزم بجدول التطعيمات الدوري",
      "راقب نمو طفلك بانتظام",
      "وفر بيئة نظيفة وآمنة للطفل",
      "شجع اللعب والنشاط البدني"
    ],
    isActive: true,
  },
  {
    slug: "water-safety",
    title: "سلامة المياه",
    points: [
      "اشرب الماء النظيف والمعقم فقط",
      "احفظ المياه في أوعية نظيفة ومغلقة",
      "اغسل خزانات المياه بانتظام",
      "تجنب شرب الماء من مصادر غير موثوقة",
      "استخدم فلاتر المياه عند الحاجة"
    ],
    isActive: true,
  },
  
  // المناسبات الصحية العالمية
  {
    slug: "world-health-day",
    title: "اليوم العالمي للصحة - 7 أبريل",
    points: [
      "الصحة حق أساسي لكل إنسان",
      "الوقاية خير من العلاج",
      "الرعاية الصحية الأولية أساس النظام الصحي",
      "معاً نحو مجتمع صحي ومعافى",
      "صحتك مسؤوليتك فحافظ عليها"
    ],
    isActive: true,
  },
  {
    slug: "world-diabetes-day",
    title: "اليوم العالمي للسكري - 14 نوفمبر",
    points: [
      "الكشف المبكر ينقذ الأرواح",
      "نمط الحياة الصحي يقلل خطر الإصابة",
      "راقب مستوى السكر بانتظام",
      "التغذية السليمة جزء من العلاج",
      "ممارسة الرياضة تساعد في السيطرة على السكري"
    ],
    isActive: true,
  },
  {
    slug: "world-heart-day",
    title: "اليوم العالمي للقلب - 29 سبتمبر",
    points: [
      "قلبك يستحق الاهتمام",
      "تجنب التدخين لحماية قلبك",
      "مارس الرياضة 30 دقيقة يومياً",
      "قلل من الملح والدهون المشبعة",
      "راقب ضغط دمك بانتظام"
    ],
    isActive: true,
  },
  {
    slug: "world-cancer-day",
    title: "اليوم العالمي للسرطان - 4 فبراير",
    points: [
      "الكشف المبكر ينقذ الحياة",
      "تجنب التدخين والكحول",
      "تناول الخضروات والفواكه يومياً",
      "حافظ على وزن صحي",
      "احمِ نفسك من أشعة الشمس الضارة"
    ],
    isActive: true,
  },
  {
    slug: "world-tuberculosis-day",
    title: "اليوم العالمي للسل - 24 مارس",
    points: [
      "السل مرض قابل للعلاج والشفاء",
      "السعال المستمر علامة تحذيرية",
      "التهوية الجيدة تقلل انتشار العدوى",
      "التزم بالعلاج الكامل",
      "لا تتردد في الفحص المبكر"
    ],
    isActive: true,
  },
  {
    slug: "world-aids-day",
    title: "اليوم العالمي للإيدز - 1 ديسمبر",
    points: [
      "المعرفة قوة والوقاية ممكنة",
      "الفحص المبكر مهم للجميع",
      "لا للوصمة نعم للدعم",
      "العلاج متوفر ويطيل الحياة",
      "معاً للقضاء على الإيدز"
    ],
    isActive: true,
  },
  {
    slug: "world-mental-health-day",
    title: "اليوم العالمي للصحة النفسية - 10 أكتوبر",
    points: [
      "صحتك النفسية بنفس أهمية صحتك الجسدية",
      "تحدث عن مشاعرك دون خجل",
      "اطلب المساعدة المتخصصة عند الحاجة",
      "خصص وقتاً للراحة والاسترخاء",
      "لا عيب في زيارة الطبيب النفسي"
    ],
    isActive: true,
  },
  {
    slug: "world-no-tobacco-day",
    title: "اليوم العالمي بدون تدخين - 31 مايو",
    points: [
      "التدخين يقتل ملايين الأشخاص سنوياً",
      "الإقلاع ممكن في أي وقت",
      "احمِ عائلتك من التدخين السلبي",
      "بيئة خالية من التدخين حق للجميع",
      "استشر الطبيب للمساعدة في الإقلاع"
    ],
    isActive: true,
  },
  {
    slug: "world-breastfeeding-week",
    title: "أسبوع الرضاعة الطبيعية العالمي",
    points: [
      "الرضاعة الطبيعية أفضل غذاء للطفل",
      "ابدئي الرضاعة خلال الساعة الأولى",
      "الرضاعة الحصرية لستة أشهر",
      "حليب الأم يقوي مناعة الطفل",
      "الرضاعة تقوي الرابطة بين الأم وطفلها"
    ],
    isActive: true,
  },
  {
    slug: "world-immunization-week",
    title: "أسبوع التطعيم العالمي",
    points: [
      "التطعيمات تنقذ ملايين الأرواح سنوياً",
      "التزم بجدول التطعيمات الوطني",
      "التطعيم آمن وفعال ومجاني",
      "حماية طفلك تبدأ بالتطعيم",
      "معاً لمجتمع محصّن من الأمراض"
    ],
    isActive: true,
  },
  {
    slug: "world-oral-health-day",
    title: "اليوم العالمي لصحة الفم - 20 مارس",
    points: [
      "اغسل أسنانك مرتين يومياً",
      "استخدم خيط الأسنان يومياً",
      "قلل من السكريات والحلويات",
      "زُر طبيب الأسنان كل 6 أشهر",
      "ابتسامة صحية تعكس صحة الجسم"
    ],
    isActive: true,
  },
  {
    slug: "world-kidney-day",
    title: "اليوم العالمي للكلى",
    points: [
      "اشرب كميات كافية من الماء يومياً",
      "راقب ضغط الدم والسكري",
      "تجنب الإفراط في الأدوية المسكنة",
      "قلل من الملح في طعامك",
      "افحص وظائف الكلى بانتظام"
    ],
    isActive: true,
  },
  {
    slug: "world-sight-day",
    title: "اليوم العالمي للبصر",
    points: [
      "افحص عينيك بانتظام",
      "احمِ عينيك من أشعة الشمس",
      "أرح عينيك من الشاشات كل 20 دقيقة",
      "تناول الأطعمة المفيدة للبصر",
      "الكشف المبكر يحمي بصرك"
    ],
    isActive: true,
  },
  {
    slug: "world-malaria-day",
    title: "اليوم العالمي للملاريا - 25 أبريل",
    points: [
      "استخدم الناموسيات المعالجة بالمبيدات",
      "تخلص من مياه الأماكن الراكدة",
      "ارتدِ ملابس طويلة في المناطق الموبوءة",
      "اطلب العلاج فوراً عند ظهور الأعراض",
      "الوقاية من الملاريا ممكنة"
    ],
    isActive: true,
  },
  {
    slug: "world-hepatitis-day",
    title: "اليوم العالمي للكبد الوبائي - 28 يوليو",
    points: [
      "التطعيم يحمي من التهاب الكبد",
      "تجنب مشاركة الأدوات الشخصية الحادة",
      "افحص نفسك للتأكد من سلامتك",
      "العلاج متوفر وفعال",
      "معاً للقضاء على التهاب الكبد"
    ],
    isActive: true,
  },
  
  // مواضيع تعزيز الصحة
  {
    slug: "healthy-lifestyle",
    title: "نمط الحياة الصحي",
    points: [
      "مارس الرياضة 150 دقيقة أسبوعياً",
      "نم 7-8 ساعات يومياً",
      "تناول 5 حصص من الخضار والفواكه",
      "اشرب 8 أكواب ماء يومياً",
      "تجنب الإجهاد والتوتر المفرط"
    ],
    isActive: true,
  },
  {
    slug: "elderly-health",
    title: "صحة كبار السن",
    points: [
      "راجع الطبيب للفحوصات الدورية",
      "حافظ على النشاط البدني المناسب",
      "تناول الأدوية في مواعيدها",
      "حافظ على التواصل الاجتماعي",
      "اهتم بالتغذية السليمة"
    ],
    isActive: true,
  },
  {
    slug: "womens-health",
    title: "صحة المرأة",
    points: [
      "الفحص الدوري للثدي ينقذ الأرواح",
      "اهتمي بصحتك قبل وأثناء الحمل",
      "تناولي الفيتامينات الضرورية",
      "مارسي الرياضة المناسبة",
      "راجعي طبيبة النسائية بانتظام"
    ],
    isActive: true,
  },
  {
    slug: "adolescent-health",
    title: "صحة المراهقين",
    points: [
      "تغذية سليمة لنمو صحي",
      "النوم الكافي ضروري للنمو",
      "ابتعد عن التدخين والمخدرات",
      "مارس الرياضة بانتظام",
      "تحدث عن مشاكلك مع من تثق بهم"
    ],
    isActive: true,
  },
  {
    slug: "food-safety",
    title: "سلامة الغذاء",
    points: [
      "اغسل الخضروات والفواكه جيداً",
      "اطبخ اللحوم جيداً حتى تنضج",
      "احفظ الطعام في درجة حرارة مناسبة",
      "تجنب الأطعمة منتهية الصلاحية",
      "افصل بين اللحوم النيئة والمطبوخة"
    ],
    isActive: true,
  },
  {
    slug: "physical-activity",
    title: "النشاط البدني",
    points: [
      "30 دقيقة رياضة يومياً تكفي",
      "المشي أبسط أنواع الرياضة",
      "الرياضة تقوي القلب والعضلات",
      "النشاط البدني يحسن المزاج",
      "ابدأ بالتدريج وزد تدريجياً"
    ],
    isActive: true,
  },
  {
    slug: "first-aid",
    title: "الإسعافات الأولية",
    points: [
      "تعلم أساسيات الإسعافات الأولية",
      "احتفظ بحقيبة إسعاف في المنزل والسيارة",
      "اتصل بالإسعاف في الحالات الطارئة",
      "تعلم الإنعاش القلبي الرئوي",
      "ابق هادئاً في حالات الطوارئ"
    ],
    isActive: true,
  },
  {
    slug: "environmental-health",
    title: "الصحة البيئية",
    points: [
      "حافظ على نظافة محيطك",
      "تخلص من النفايات بشكل صحيح",
      "قلل من استخدام البلاستيك",
      "ازرع الأشجار لتنقية الهواء",
      "بيئة نظيفة تعني صحة أفضل"
    ],
    isActive: true,
  },
  {
    slug: "sleep-health",
    title: "صحة النوم",
    points: [
      "نم 7-8 ساعات يومياً",
      "حافظ على موعد نوم ثابت",
      "تجنب الشاشات قبل النوم",
      "اجعل غرفة نومك مظلمة وهادئة",
      "تجنب الكافيين مساءً"
    ],
    isActive: true,
  },
  {
    slug: "stress-management",
    title: "إدارة التوتر والضغوط",
    points: [
      "مارس تمارين التنفس العميق",
      "خصص وقتاً للاسترخاء يومياً",
      "مارس هواياتك المفضلة",
      "تحدث عن مشاكلك مع الآخرين",
      "نظم وقتك لتجنب الضغوط"
    ],
    isActive: true,
  },
];

export async function seedTopics() {
  console.log("Seeding approved topics...");
  
  for (const topic of ministryApprovedTopics) {
    try {
      await db.insert(approvedTopics).values(topic).onConflictDoNothing();
      console.log(`Added topic: ${topic.title}`);
    } catch (error) {
      console.log(`Topic already exists: ${topic.title}`);
    }
  }
  
  // Create default admin user if not exists
  try {
    const passwordHash = await bcrypt.hash("admin123", 10);
    await db.insert(users).values({
      name: "مدير النظام",
      email: "admin@kirkuk.health",
      passwordHash,
      role: "admin",
      status: "approved",
    }).onConflictDoNothing();
    console.log("Admin user created: admin@kirkuk.health");
  } catch (error) {
    console.log("Admin user already exists");
  }
  
  console.log("Seeding completed!");
}
